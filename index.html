<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script>
/*global nn*/
  
const GIF = 'Blob Morphing Sticker.gif'
const COLOR = 'DarkKhaki'

function sleep (ms) {
   return new Promise(resolve => setTimeout(resolve, ms))
}
  
function createGif (x, y, w, h, gif){
  nn.create('img')
     .set({ src: `${gif}#${Math.random()}`})
     .css({
      position: 'absolute',
      width: 100,
      left: x - w / 2,
      top: y - h / 2,
      transition: 'all 1s',
      imageRendering:'pixelated'
    })
    .addTo('body')
}

  async function createGifCircle (num, scale, startRadius, gifPath) {
    
    const gif1 = await nn.loadImage(gifPath)
    
    const cx = nn.width / 2
    const cy = nn.height / 2
    num = 200
    let rad = startRadius
    for (let i = 0; i < num; i++) {
      const s = 9.5
      const x = cx + Math.sin(i * s) * rad
      const y = cy + Math.cos(i * s) * rad
      await sleep(50)
      createGif(x, y, gif1.width, gif1.height, gifPath)
      rad += 2
    }
  }
  
async function setup () {
    nn.get('html').css({
      margin: 0,
      padding: 0,
      width: '100%',
      height: '100%'
    })
  
    nn.get('body').css({ 
      margin: 0,
      padding: 0,
      width: '100%',
      height: '100%',
      backgroundColor: COLOR,
      overflow: 'hidden',
      position: 'relative'
    })
  
    createGifCircle(22, 0.3, 100, GIF)
    createGifCircle(22, 0.3, 160, GIF)
    createGifCircle(22, 0.3, 180, GIF)
}
  nn.on('load', setup)
  nn.on('resize', setup)
  
</script>